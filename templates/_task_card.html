{# templates/_task_card.html #}
<div class="card kanban-card mb-2" data-task-id="{{ task.id }}">
    <div class="card-body">
        <h6 class="card-title mb-1">
            <a href="{{ url_for('main.task_detail', task_id=task.id) }}" class="text-decoration-none">
                {{ task.title }}
            </a>
        </h6>
        <p class="card-text small text-muted mb-1">
            <i class="far fa-calendar-alt"></i> Prazo: {{ task.due_date.strftime('%d/%m/%Y') if task.due_date else '' }}
            {% if task.due_date and task.due_date.date() < now_utc.date() and not task.is_completed %}
                <span class="badge bg-danger ms-1">Atrasada</span>
            {% elif task.is_completed %}
                <span class="badge bg-success ms-1">Concluída</span>
            {% endif %}
        </p>
        <p class="card-text small mb-1">
            <i class="fas fa-users"></i> Atribuído a: 
            {% for assignment in task.assignees_associations %}
                {{ assignment.user.username }}{% if not loop.last %}, {% endif %}
            {% else %}
                Ninguém
            {% endfor %}
        </p>
        {% if task.event %}
            <p class="card-text small mb-1">
                <i class="fas fa-project-diagram"></i> Evento: {{ task.event.title }}
            </p>
        {% endif %}
    </div>
</div>